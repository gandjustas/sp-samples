var _;(function(){function n(){SP.SOD.executeFunc("typescripttemplates.ts","CSR",function(){CSR.override(1e4,2).onPreRender(function(n){var r=n.ListData.Row,i;for(n.totalHours=0,i=0;i<r.length;i++)r[i]["DurationInHours."]?n.totalHours+=parseFloat(r[i]["DurationInHours."]):n.openLogItem=r[i].ID;n.buttonText=t(Boolean(n.openLogItem)),n.spanId=n.wpq+"_totalHours",n.buttonId=n.wpq+"_button"}).header(" ").body(r).footer(" ").onPostRender(u).onPostRender(i).register()}),SP.SOD.execute("mQuery.js","m$.ready",function(){RegisterModuleInit(_spPageContextInfo.webServerRelativeUrl+"/Scripts/view.js",n)}),SP.SOD.notifyScriptLoadedAndExecuteWaitingJobs("view.ts")}function i(n){var t=$get("MSOZoneCell_WebPart"+n.wpq),i;t.onkeyup=t.onmouseup=function(){},i=$get("scriptPaging"+n.wpq),i.style.display="none"}function t(n){return n?"Check-Out":"Check-In"}function r(n){var t=[];return t.push("<div>"),t.push(String.format('<p>Total hours submitted <span id="{0}" >{1}<\/span><\/p>',n.spanId,n.totalHours.toPrecision(2))),t.push(String.format('<button id="{0}" disabled="disabled">{1}<\/button>',n.buttonId,n.buttonText)),t.push("<\/div>"),t.join("")}function u(n){SP.SOD.executeFunc("sp.js","SP.CleintContext",function(){function h(){r.disabled=!1,r.innerHTML=t(Boolean(i)),f.innerHTML=o.toPrecision(2)}function l(n){var u=i.get_item("StartDate"),t=new Date,r=(t.getTime()-u.getTime())/36e5;i.set_item("DateCompleted",t),i.set_item("DurationInHours",r),i.update(),SPAnimationUtility.BasicAnimator.FadeOut(f),e(function(){i=null,o+=r,SPAnimationUtility.BasicAnimator.FadeIn(f),n()})}function a(n){var t=s.addItem(new SP.ListItemCreationInformation);t.set_item("StartDate",new Date),t.update(),e(function(){i=t,n()})}function e(n){u.executeQueryAsync(function(){n()},function(n,t){alert(t.get_message()),SP.Utilities.Utility.logCustomAppError(u,t.get_message()+"\n"+t.get_stackTrace()),u.executeQueryAsync()})}var r=$get(n.buttonId),f=$get(n.spanId),o=n.totalHours,u=SP.ClientContext.get_current(),c=u.get_web(),s=c.get_lists().getById(n.listName),i;n.openLogItem?(i=s.getItemById(n.openLogItem),u.load(i),e(function(){r.disabled=!1})):r.disabled=!1,SP.SOD.executeFunc("mQuery.js","m$",function(){m$(r).click(function(n){r.disabled=!0,i?l(h):a(h),n.preventDefault()})})})}n()})(_||(_={}))